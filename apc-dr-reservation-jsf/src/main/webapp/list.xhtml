<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

<ui:composition template="/template.xhtml">
    <f:metadata>
        <f:viewAction action="#{reservationFormBean.initialize}"></f:viewAction>
    </f:metadata>

    <ui:define name="pageHeader">
        <div class="d-flex mt-5 justify-content-between mb-3">
            <h2><h:outputText value="#{msg['list.pageTitle']}"></h:outputText></h2>
        </div>
        <div class="mt-4">
            <p class="mb-2">Discussion Room</p>
            <h:selectOneMenu class="form-select"
                             id="discussionRoom" converter="#{roomConverter}" aria-label="Discussion room">
                <f:selectItems value="#{reservationFormBean.existingRooms}" var="room"
                               itemLabel="#{room.name}" itemValue="#{room}"></f:selectItems>
            </h:selectOneMenu>
        </div>
    </ui:define>

    <ui:define name="pageBody">
        <ui:repeat value="#{reservationFormBean.reservationsGroupedByDate.entrySet().toArray()}" var="reservationGroups">
            <h4 class="fw-normal mb-3">
                <h:outputText value="#{reservationGroups.key}">
                    <f:convertDateTime pattern = "MMMM d, yyyy" />
                </h:outputText>
            </h4>
            <ui:repeat value="#{reservationGroups.value}" var="reservation">
                <h:outputText value="#{reservation.studentName}"></h:outputText>
            </ui:repeat>
        </ui:repeat>
    </ui:define>
</ui:composition>
</html>